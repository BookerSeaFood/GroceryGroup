<!DOCTYPE html>

<html>
    <head>
		<title>myBasket</title>

        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

		<link rel="stylesheet" href="js/lib/jQueryMobile/jquery.mobile-1.4.5.min.css">
		<link rel="stylesheet" href="css/my-lists.css">

		<script src="js/lib/jQuery/jquery-1.12.2.min.js"></script>
		<script src="js/lib/jQueryMobile/jquery.mobile-1.4.5.min.js"></script>
		<script src="js/classes/mockgrocerylist.js"></script>

		<script>
			if (mb == null || typeof(mb) != "object"){
				 var mb = new Object();
			}

			if (mb.glob == null || typeof(mb.glob) != "object"){
				mb.glob = new Object();
			}

			// Need to implement a lot here
			mb.glob.selectedList = "Mock List";

			$(document).bind("mobileinit",function() {
				$.mobile.changePage.defaults.changeHash = false;
				$.mobile.hashListeningEnabled = false;
				$.mobile.pushStateEnabled = false;
			});

			mb.glob.curList = new mb.MockGroceryList();
			mb.glob.curList.load(mb.glob.selectedList);
		</script>
    </head>

<!--
View List
	*display list name
	*display items in list
	*option to add item and reroute to add item page
 -->
    <body>
        <div data-role="page" id="listPage">
			<div data-role="header" class="listTitle">
				<a href="#addItemPage" data-icon="plus">Add Item</a>
				<!-- -->
			</div>
		    <div class="list">
				<!-- -->
		    </div>
        </div>

		<!--
		Add item Page:
			*enter name and number for item and adds item to list
			*return to view list page
            *select cancel: return to listPage
		-->
		<div data-role="page" id="addItemPage">
            <div data-role="header">
                <h2>Add Item</h2>
			<a href="#listPage" data-icon="delete" class="cancelItem">Cancel</a>

            </div>
            <div style="padding16px;">
                Item : <input class="nameInput" type="textbox" value="" placeholder="Item Name"/></input>
            </div>

            <div style="padding16px;">
                Quantity : <input class="ctInput" type="number" value="" placeholder="Amount"/></input>
            </div>

            <a  href="#listPage"><button class="enterItem" id="Enter">Enter Item</button></a>

        </div>
    </body>
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript">
		// Still need a lot to be implemented for this to work, but this is
		//  the basic idea

		$('.listTitle').append('<h3>' + mb.glob.selectedList + '</h3>');

		function update(num) {

			var bgClass = 'oddListItem';
			if (!mb.odd) {
				bgClass = 'evenListItem';
			}

			$('.list').append('<div class="listItem ' + bgClass + '">' +
					mb.listItemToHtml(mb.glob.curList.get(i)) + '</div>');

			mb.odd = !mb.odd;
		}

		// Show the list items
		mb.odd = false;
		for (var i = 0; i < mb.glob.curList.len(); i++){
			update(i);
		}

		function addItem() {
			var item = new Object();
			item.name = $('.nameInput').val();
			item.ct = $('.ctInput').val();

			if (!item.name || !item.ct){
				return;
			}

			var i = mb.glob.curList.len();
			mb.glob.curList.addItem(mb.glob.curList, item);

			clearInput();
			update(i);
		}

		$('.enterItem').click(addItem);

		function clearInput() {
			$('.nameInput').val('');
			$('.ctInput').val('');
		}

		$('.cancelItem').click(clearInput);

	</script>
</html>
